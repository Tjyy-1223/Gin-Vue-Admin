# ç¬¬ä¸€ç«  æ¶æ„ä¸åˆå§‹åŒ–

å­¦ä¹ å‚è€ƒï¼š[gin-vue-blog](https://github.com/szluyu99/gin-vue-blog)

## 1 é¡¹ç›®ä»‹ç»

æœ¬é¡¹ç›®åœ¨ä»¥**åšå®¢**è¿™ä¸ªä¸šåŠ¡ä¸ºä¸»çš„å‰æä¸‹ï¼Œæä¾›ä¸€ä¸ªå®Œæ•´çš„å…¨æ ˆé¡¹ç›®ä»£ç ï¼ˆå‰å°å‰ç«¯ + åå°å‰ç«¯ + åç«¯ï¼‰ï¼ŒæŠ€æœ¯ç‚¹åŸºæœ¬éƒ½æ˜¯æœ€æ–° + æœ€ç«çš„æŠ€æœ¯ï¼Œä»£ç è½»é‡çº§ï¼Œæ³¨é‡Šå®Œå–„ï¼Œé€‚åˆå­¦ä¹ ã€‚

å‰å°ï¼š

- å‰å°ç•Œé¢è®¾è®¡å‚è€ƒ Hexo çš„ Butterfly è®¾è®¡ï¼Œç¾è§‚ç®€æ´
- å“åº”å¼å¸ƒå±€ï¼Œé€‚é…äº†ç§»åŠ¨ç«¯
- å®ç°ç‚¹èµï¼Œç»Ÿè®¡ç”¨æˆ·ç­‰åŠŸèƒ½ (Redis)
- è¯„è®º + å›å¤è¯„è®ºåŠŸèƒ½
- ç•™è¨€é‡‡ç”¨å¼¹å¹•å¢™ï¼Œæ•ˆæœç‚«é…·
- æ–‡ç« è¯¦æƒ…é¡µæœ‰æ–‡ç« ç›®å½•ã€æ¨èæ–‡ç« ç­‰åŠŸèƒ½ï¼Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒ

åå°ï¼š

- é‰´æƒä½¿ç”¨ JWT
- æƒé™ç®¡ç†ä½¿ç”¨ CASBINï¼Œå®ç°åŸºäº RBAC çš„æƒé™ç®¡ç†
- æ”¯æŒåŠ¨æ€æƒé™ä¿®æ”¹ï¼Œå‰ç«¯èœå•ç”±åç«¯ç”Ÿæˆï¼ˆåŠ¨æ€è·¯ç”±ï¼‰
- æ–‡ç« ç¼–è¾‘ä½¿ç”¨ Markdown ç¼–è¾‘å™¨
- å¸¸è§„åå°åŠŸèƒ½é½å…¨ï¼šä¾§è¾¹æ ã€é¢åŒ…å±‘ã€æ ‡ç­¾æ ç­‰
- å®ç°è®°å½•æ“ä½œæ—¥å¿—åŠŸèƒ½ï¼ˆGET ä¸è®°å½•ï¼‰
- å®ç°ç›‘å¬åœ¨çº¿ç”¨æˆ·ã€å¼ºåˆ¶ä¸‹çº¿åŠŸèƒ½
- æ–‡ä»¶ä¸Šä¼ æ”¯æŒä¸ƒç‰›äº‘ã€æœ¬åœ°ï¼ˆåç»­è®¡åˆ’æ”¯æŒæ›´å¤šï¼‰
- å¯¹ CRUD æ“ä½œå°è£…äº†é€šç”¨ Hook

å…¶ä»–ï¼š

- é‡‡ç”¨ Restful é£æ ¼çš„ API
- å‰åç«¯åˆ†ç¦»éƒ¨ç½²ï¼Œå‰ç«¯ä½¿ç”¨ Nginxï¼Œåç«¯ä½¿ç”¨ Docker
- ä»£ç æ•´æ´å±‚æ¬¡æ¸…æ™°ï¼Œåˆ©äºå¼€å‘è€…å­¦ä¹ 
- æŠ€æœ¯ç‚¹æ–°é¢–ï¼Œä»£ç è½»é‡çº§ï¼Œé€‚åº¦å°è£…
- Docker Compose ä¸€é”®è¿è¡Œï¼Œè½»æ¾æ­å»ºåœ¨çº¿åšå®¢

åç»­åŠŸèƒ½è¡¥å……ï¼š

é«˜ä¼˜å…ˆçº§:

- ~~å®Œå–„å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½, ç›®å‰æ–‡ä»¶ä¸Šä¼ è¿˜æ²¡æ€ä¹ˆå¤„ç†~~ ğŸ†—
- åå°é¦–é¡µé‡æ–°è®¾è®¡ï¼ˆç›®å‰æ²¡æ”¾ä»€ä¹ˆå†…å®¹ï¼‰
- ~~å‰å°é¦–é¡µæœç´¢æ–‡ç« ï¼ˆç›®å‰ä½¿ç”¨æ•°æ®åº“æ¨¡ç³Šæœç´¢ï¼‰~~ ğŸ†—
- ~~åšå®¢æ–‡ç« å¯¼å…¥å¯¼å‡º (.md æ–‡ä»¶)~~ ğŸ†—
- ~~æƒé™ç®¡ç†ä¸­èœå•ç¼–è¾‘æ—¶é€‰æ‹©å›¾æ ‡ï¼ˆç°åœ¨åªèƒ½è¾“å…¥å›¾æ ‡å­—ç¬¦ä¸²ï¼‰~~ ğŸ†—
- åç«¯æ—¥å¿—åˆ‡å‰²
- ~~åå°ä¿®æ”¹èƒŒæ™¯å›¾ç‰‡ï¼Œåšå®¢é…ç½®ç­‰~~ ğŸ†—
- ~~åç«¯çš„ IP åœ°å€æ£€æµ‹ BUG å¾…ä¿®å¤~~ ğŸ†—
- ~~åšå®¢å‰å°é€‚é…ç§»åŠ¨ç«¯~~ ğŸ†—
- ~~æ–‡ç« è¯¦æƒ…, ç›®å½•é”šç‚¹è·Ÿéš~~ ğŸ†—
- ~~é‚®ç®±æ³¨å†Œ + é‚®ä»¶å‘é€éªŒè¯ç ~~ ğŸ†—
- ä¿®æ”¹æµ‹è¯•ç¯å¢ƒçš„æ•°æ®åº“ä¸º SQLite3ï¼Œæ–¹ä¾¿è¿è¡Œ

åç»­æœ‰ç©ºå®‰æ’ä¸Šï¼š

- é»‘å¤œæ¨¡å¼
- å‰å°æ”¶ç¼©ä¾§è¾¹ä¿¡æ¯åŠŸèƒ½
- è¯´è¯´
- ç›¸å†Œ
- éŸ³ä¹æ’­æ”¾å™¨
- é¼ æ ‡å·¦å‡»ç‰¹æ•ˆ
- çœ‹æ¿å¨˜
- ç¬¬ä¸‰æ–¹ç™»å½•: QQã€å¾®ä¿¡ã€Github ...
- è¯„è®ºæ—¶æ”¯æŒé€‰æ‹©è¡¨æƒ…ï¼Œå‚è€ƒ Valine
- å•ç‹¬éƒ¨ç½²ï¼šå‰åç«¯ + ç¯å¢ƒ
- é‡å†™å•å…ƒæµ‹è¯•ï¼Œç›®å‰çš„å•å…ƒæµ‹è¯•æ˜¯æ—©æœŸç‰ˆæœ¬ï¼Œé¡¹ç›®æ¶æ„æ›´æ”¹åï¼Œæ— æ³•è·‘é€š
- å‰å°é¦–é¡µæœç´¢é›†æˆ ElasticSearch
- å›½é™…åŒ–?



## 2 æŠ€æœ¯ä»‹ç»

> è¿™é‡Œå†™ä¸€äº›ä¸»æµçš„é€šç”¨æŠ€æœ¯ï¼Œè¯¦ç»†ç¬¬ä¸‰æ–¹åº“ï¼šå‰ç«¯å‚è€ƒ `package.json` æ–‡ä»¶ï¼Œåç«¯å‚è€ƒ `go.mod` æ–‡ä»¶

å‰ç«¯æŠ€æœ¯æ ˆ: ä½¿ç”¨ npm åŒ…ç®¡ç†å·¥å…·

- **åŸºäº TypeScript**
- **Vue3**
- VueUse: æœåŠ¡äº Vue Composition API çš„å·¥å…·é›†
- Unocss: åŸå­åŒ– CSS
- Pinia
- Vue Router
- Axios
- Naive UI
- ...

åç«¯æŠ€æœ¯æ ˆ:

- **Golang**
- Docker
- **Gin**
- **GORM**
- Viper: æ”¯æŒ TOML (é»˜è®¤)ã€YAML ç­‰å¸¸ç”¨æ ¼å¼ä½œä¸ºé…ç½®æ–‡ä»¶
- Casbin
- Zap
- **MySQL**
- **Redis**
- Nginx: éƒ¨ç½²é™æ€èµ„æº + åå‘ä»£ç†
- ...

å…¶ä»–:

- è…¾è®¯äº‘äººæœºéªŒè¯
- ä¸ƒç‰›äº‘å¯¹è±¡å­˜å‚¨
- ...



## 3 ç›®å½•ç»“æ„

> è¿™é‡Œç®€å•åˆ—å‡ºç›®å½•ç»“æ„ï¼Œå…·ä½“å¯ä»¥æŸ¥çœ‹æºç 

ä»£ç ä»“åº“ç›®å½•ï¼š

```
gin-vue-blog
â”œâ”€â”€ gin-blog-admin      -- åšå®¢åå°å‰ç«¯
â”œâ”€â”€ gin-blog-front      -- åšå®¢å‰å°å‰ç«¯
â”œâ”€â”€ gin-blog-server     -- åšå®¢åç«¯
â”œâ”€â”€ deploy              -- éƒ¨ç½²
```

åç«¯ç›®å½•ï¼šç®€ç•¥ç‰ˆ

```
gin-blog-server
â”œâ”€â”€ api             -- API
â”‚   â”œâ”€â”€ front       -- å‰å°æ¥å£
â”‚   â””â”€â”€ v1          -- åå°æ¥å£
â”œâ”€â”€ dao             -- æ•°æ®åº“æ“ä½œæ¨¡å—
â”œâ”€â”€ service         -- æœåŠ¡æ¨¡å—
â”œâ”€â”€ model           -- æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ req             -- è¯·æ±‚ VO æ¨¡å‹
â”‚   â”œâ”€â”€ resp            -- å“åº” VO æ¨¡å‹
â”‚   â”œâ”€â”€ dto             -- å†…éƒ¨ä¼ è¾“ DTO æ¨¡å‹
â”‚   â””â”€â”€ ...             -- æ•°æ®åº“æ¨¡å‹å¯¹è±¡ PO æ¨¡å‹
â”œâ”€â”€ routes          -- è·¯ç”±æ¨¡å—
â”‚   â””â”€â”€ middleware      -- è·¯ç”±ä¸­é—´ä»¶
â”œâ”€â”€ utils           -- å·¥å…·æ¨¡å—
â”‚   â”œâ”€â”€ r               -- å“åº”å°è£…
â”‚   â”œâ”€â”€ upload          -- æ–‡ä»¶ä¸Šä¼ 
â”‚   â””â”€â”€ ...
â”œâ”€â”€ routes          -- è·¯ç”±æ¨¡å—
â”œâ”€â”€ config          -- é…ç½®æ–‡ä»¶
â”œâ”€â”€ test            -- æµ‹è¯•æ¨¡å—
â”œâ”€â”€ assets          -- èµ„æºæ–‡ä»¶
â”œâ”€â”€ log             -- å­˜æ”¾æ—¥å¿—çš„ç›®å½•
â”œâ”€â”€ public          -- å¤–éƒ¨è®¿é—®çš„é™æ€èµ„æº
â”‚   â””â”€â”€ uploaded    -- æœ¬åœ°æ–‡ä»¶ä¸Šä¼ ç›®å½•
â”œâ”€â”€ Dockerfile
â””â”€â”€ main.go
```

å‰ç«¯ç›®å½•ï¼šç®€ç•¥ç‰ˆ

```
gin-vue-admin / gin-vue-front é€šç”¨ç›®å½•ç»“æ„
â”œâ”€â”€ src              
â”‚Â Â  â”œâ”€â”€ api             -- æ¥å£
â”‚Â Â  â”œâ”€â”€ assets          -- é™æ€èµ„æº
â”‚Â Â  â”œâ”€â”€ styles          -- æ ·å¼
â”‚Â Â  â”œâ”€â”€ components      -- ç»„ä»¶
â”‚Â Â  â”œâ”€â”€ composables     -- ç»„åˆå¼å‡½æ•°
â”‚Â Â  â”œâ”€â”€ router          -- è·¯ç”±
â”‚Â Â  â”œâ”€â”€ store           -- çŠ¶æ€ç®¡ç†
â”‚Â Â  â”œâ”€â”€ utils           -- å·¥å…·æ–¹æ³•
â”‚Â Â  â”œâ”€â”€ views           -- é¡µé¢
â”‚Â Â  â”œâ”€â”€ App.vue
â”‚Â Â  â””â”€â”€ main.ts
â”œâ”€â”€ settings         -- é¡¹ç›®é…ç½®
â”œâ”€â”€ build            -- æ„å»ºç›¸å…³çš„é…ç½®
â”œâ”€â”€ public           -- å…¬å…±èµ„æº, åœ¨æ‰“åŒ…åä¼šè¢«åŠ åˆ° dist æ ¹ç›®å½•
â”œâ”€â”€ package.json 
â”œâ”€â”€ package-lock.json
â”œâ”€â”€ index.html
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ unocss.config.ts -- unocss é…ç½®
â””â”€â”€ vite.config.ts   -- vite é…ç½®
â”œâ”€â”€ .env             -- é€šç”¨ç¯å¢ƒå˜é‡
â”œâ”€â”€ .env.development -- å¼€å‘ç¯å¢ƒå˜é‡
â”œâ”€â”€ .env.production  -- çº¿ä¸Šç¯å¢ƒå˜é‡
â”œâ”€â”€ .gitignore
â”œâ”€â”€ .editorconfig    -- ç¼–è¾‘å™¨é…ç½®
```

éƒ¨ç½²ç›®å½•ï¼šç®€ç•¥ç‰ˆ

```
deploy
â”œâ”€â”€ build      -- é•œåƒæ„å»º
â”‚Â Â  â”œâ”€â”€ mysql  -- mysql é•œåƒæ„å»º
â”‚Â Â  â”œâ”€â”€ server -- åç«¯é•œåƒæ„å»º (åŸºäº gin-blog-server ç›®å½•)
â”‚Â Â  â””â”€â”€ web    -- å‰ç«¯é•œåƒæ„å»º (åŸºäºå‰ç«¯é¡¹ç›®æ‰“åŒ…çš„é™æ€èµ„æº)
â””â”€â”€ start
    â”œâ”€â”€ docker-compose.yml    -- å¤šå®¹å™¨ç®¡ç†
    â””â”€â”€ .env                  -- ç¯å¢ƒå˜é‡
    â””â”€â”€ ...
```



## 4 ç¯å¢ƒä»‹ç»

| å¼€å‘å·¥å…·                      | è¯´æ˜                   |
| ----------------------------- | ---------------------- |
| Vscode                        | Golang åç«¯ + Vue å‰ç«¯ |
| Navicat                       | MySQL è¿œç¨‹è¿æ¥å·¥å…·     |
| Another Redis Desktop Manager | Redis è¿œç¨‹è¿æ¥å·¥å…·     |
| MobaXterm                     | Linux è¿œç¨‹å·¥å…·         |
| Apifox                        | æ¥å£è°ƒè¯• + æ–‡æ¡£ç”Ÿæˆ    |

| å¼€å‘ç¯å¢ƒ | ç‰ˆæœ¬ |
| -------- | ---- |
| Golang   | 1.19 |
| MySQL    | 8.x  |
| Redis    | 7.x  |

å…³äº vscode æ’ä»¶ï¼š

ç›®å‰æ¨èå®‰è£…æ’ä»¶å·²ç»å†™åˆ° `.vscode/extensions.json` ä¸­ï¼Œä½¿ç”¨ VsCode æ‰“å¼€é¡¹ç›®ä¼šæ¨èå®‰è£…ã€‚

> æ³¨æ„ï¼Œä½¿ç”¨ VsCode æ‰“å¼€ gin-blog-admin å’Œ gin-blog-front è¿™ä¸¤ä¸ªé¡¹ç›®ï¼Œè€Œä¸æ˜¯æ‰“å¼€ gin-vue-blog è¿™ä¸ªç›®å½•ï¼





## 5 å¿«é€Ÿè¿è¡Œå‚è€ƒ

éœ€è¦å®‰è£… Golangã€Nodeã€MySQLã€Redis ç¯å¢ƒï¼š

- Golang å®‰è£…å‚è€ƒ [å®˜æ–¹æ–‡æ¡£](https://go.dev/doc/install)
- Node å®‰è£…å»ºè®®ä½¿ç”¨ [Nvm](https://nvm.uihtm.com/)ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å» [Node å®˜ç½‘](https://nodejs.org/en) ä¸‹è½½
- MySQLã€Redis å»ºè®®ä½¿ç”¨ Docker å®‰è£…

> ä»¥ä¸‹ä½¿ç”¨ Docker å®‰è£…ç¯å¢ƒï¼ŒæœªåšæŒä¹…åŒ–å¤„ç†ï¼Œä»…ç”¨äºå¼€å‘å’Œæ¼”ç¤º

Docker å®‰è£… MySQLï¼š

```
# æ³¨æ„: å¿…é¡»å®‰è£… MySQL 8.0 ä»¥ä¸Šç‰ˆæœ¬
docker pull mysql:8.0

# è¿è¡Œ MySQL
docker run --name mysql8 -e MYSQL_ROOT_PASSWORD=123456 -p 3306:3306 -d mysql:8.0

# æŸ¥çœ‹æ˜¯å¦è¿è¡ŒæˆåŠŸ, STATUS ä¸º Up å³æˆåŠŸ
docker ps

# è¿›å…¥å®¹å™¨, CTRL + D é€€å‡º
docker exec -it mysql8 bash
mysql -u root -p123456
```

Docker å®‰è£… Redisï¼š

```
docker pull redis:7.0

# è¿è¡Œ Redis
// brew services start redis
docker run --name redis7 -p 6379:6379 -d redis:7.0

# æŸ¥çœ‹æ˜¯å¦è¿è¡ŒæˆåŠŸ, STATUS ä¸º Up å³æˆåŠŸ
docker ps

# è¿›å…¥å®¹å™¨, CTRL + D é€€å‡º
docker exec -it redis7 bash
redis-cli
```

éœ€è¦å…ˆè¿è¡Œåç«¯æœåŠ¡ï¼Œå†è¿è¡Œå‰ç«¯é¡¹ç›®ï¼Œå› ä¸ºå¾ˆå¤šå‰ç«¯é…ç½®ç”±åç«¯åŠ¨æ€åŠ è½½ï¼ˆå¦‚èœå•ç­‰ï¼‰ã€‚

æ‹‰å–é¡¹ç›®åˆ°æœ¬åœ°ï¼š

```
git clone https://github.com/szluyu99/gin-vue-blog.git
```

åç«¯é¡¹ç›®è¿è¡Œï¼š

```
# 1ã€è¿›å…¥åç«¯é¡¹ç›®æ ¹ç›®å½• 
cd gin-blog-server

# 2ã€ä¿®æ”¹é¡¹ç›®è¿è¡Œçš„é…ç½®æ–‡ä»¶ï¼Œé»˜è®¤åŠ è½½ä½äº config/config.toml 

# 3ã€MySQL å¯¼å…¥ gvb.sql

# 4ã€å¯åŠ¨ Redis 

# 5ã€è¿è¡Œé¡¹ç›®
go mod tidy
go run main.go
```

æ•°æ®åº“ä¸­çš„é»˜è®¤ç”¨æˆ·ï¼š

- ç®¡ç†å‘˜ admin 123456
- æ™®é€šç”¨æˆ· user 123456
- æµ‹è¯•ç”¨æˆ· test 123456

å‰ç«¯é¡¹ç›®è¿è¡Œï¼š æœ¬é¡¹ç›®ä½¿ç”¨ pnpm è¿›è¡ŒåŒ…ç®¡ç†ï¼Œå»ºè®®å…¨å±€å®‰è£… `pnpm`

```
npm install -g pnpm
```

å‰å°å‰ç«¯ï¼š

```
# 1ã€è¿›å…¥å‰å°å‰ç«¯é¡¹ç›®æ ¹ç›®å½•
cd gin-blog-front

# 2ã€å®‰è£…ä¾èµ–
pnpm install

# 3ã€è¿è¡Œé¡¹ç›®
pnpm dev
```

åå°å‰ç«¯ï¼š

```
# 1ã€è¿›å…¥åå°å‰ç«¯é¡¹ç›®æ ¹ç›®å½•
cd gin-blog-admin

# 2ã€å®‰è£…ä¾èµ–
pnpm install

# 3ã€è¿è¡Œé¡¹ç›®
pnpm dev
```



